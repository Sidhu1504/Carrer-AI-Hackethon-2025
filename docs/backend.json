{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the CareerCraft AI application.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier for the user from Firebase Auth."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "uid",
        "email",
        "createdAt"
      ]
    },
    "ResumeAnalysis": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ResumeAnalysis",
      "type": "object",
      "description": "Stores the results of a resume analysis performed by the AI.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resume analysis record."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who uploaded the resume."
        },
        "atsScore": {
          "type": "number",
          "description": "The ATS score generated by the AI for the resume."
        },
        "improvementSuggestions": {
          "type": "string",
          "description": "AI-generated tips for improving the resume."
        },
        "missingSkills": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "List of missing skills identified."
        },
        "learningPlan": {
          "type": "string",
          "description": "A personalized 4-week learning plan for missing skills."
        },
        "analysisDate": {
          "type": "string",
          "description": "Timestamp indicating when the resume analysis was performed.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "atsScore",
        "improvementSuggestions",
        "missingSkills",
        "learningPlan",
        "analysisDate"
      ]
    },
    "MockInterview": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MockInterview",
      "type": "object",
      "description": "Represents a mock interview session and its results.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the mock interview session."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who participated in the mock interview."
        },
        "profession": {
          "type": "string",
          "description": "The profession selected for the mock interview (e.g., Software Engineer, Data Scientist)."
        },
        "averageScore": {
          "type": "number",
          "description": "Overall average score for the mock interview session."
        },
        "interviewDate": {
          "type": "string",
          "description": "Timestamp indicating when the mock interview took place.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "profession",
        "averageScore",
        "interviewDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
     "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. Authorization is based on matching {userId} with request.auth.uid.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/resumeAnalyses/{resumeAnalysisId}",
        "definition": {
          "entityName": "ResumeAnalysis",
          "schema": {
            "$ref": "#/backend/entities/ResumeAnalysis"
          },
          "description": "Stores resume analysis results for a specific user. Authorization is based on path-based ownership: request.auth.uid must match the {userId}.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user who owns the resume analysis."
            },
            {
              "name": "resumeAnalysisId",
              "description": "The unique identifier for the resume analysis record."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/mockInterviews/{mockInterviewId}",
        "definition": {
          "entityName": "MockInterview",
          "schema": {
            "$ref": "#/backend/entities/MockInterview"
          },
          "description": "Stores mock interview records for a specific user. Authorization is based on path-based ownership: request.auth.uid must match the {userId}.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user who participated in the mock interview."
            },
            {
              "name": "mockInterviewId",
              "description": "The unique identifier for the mock interview session."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to store user data, resume analysis results, and mock interview records. The structure prioritizes authorization independence to ensure secure and scalable operations. User data, resume analyses, and mock interview records are stored in separate collections under the `/users/{userId}` path, ensuring path-based ownership. This approach simplifies security rules, eliminating the need for complex `get()` calls and facilitating atomic operations."
  }
}
    